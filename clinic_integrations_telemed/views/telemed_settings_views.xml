<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Telemedicine Settings Configuration Form -->
    <record id="view_telemed_settings_form" model="ir.ui.view">
        <field name="name">Telemedicine Settings</field>
        <field name="model">clinic.telemed.settings</field>
        <field name="arch" type="xml">
            <form string="Telemedicine Settings" class="oe_form_configuration">
                <header>
                    <button string="Save" type="object" name="execute" class="oe_highlight"/>
                    <button string="Cancel" type="object" name="cancel" class="btn-secondary"/>
                </header>
                <div class="row mt16 o_settings_container">
                    <!-- Module Information -->
                    <div class="col-12">
                        <field name="module_info" nolabel="1"/>
                    </div>

                    <!-- Session Configuration -->
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="id" invisible="1"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="default_session_duration"/>
                            <div class="text-muted">
                                Default duration for new telemedicine sessions
                            </div>
                            <div class="content-group">
                                <field name="default_session_duration" class="oe_inline"/> minutes
                            </div>
                        </div>
                    </div>

                    <!-- Recording Configuration -->
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="recording_enabled"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="recording_enabled"/>
                            <div class="text-muted">
                                Enable session recording (depends on Discuss capabilities)
                            </div>
                            <div class="content-group" invisible="not recording_enabled">
                                <div class="mt8">
                                    <label for="recording_retention_days" class="o_light_label"/>
                                    <field name="recording_retention_days" class="oe_inline"/> days
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notification Configuration -->
                    <div class="col-12 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="send_email_invites"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="send_email_invites"/>
                            <div class="text-muted">
                                Automatically send email invitations to patients and doctors
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="send_sms_reminders"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="send_sms_reminders"/>
                            <div class="text-muted">
                                Send SMS reminders before telemedicine sessions start
                            </div>
                            <div class="content-group" invisible="not send_sms_reminders">
                                <div class="mt8">
                                    <label for="reminder_time" class="o_light_label"/>
                                    <field name="reminder_time" class="oe_inline"/> minutes before
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Auto-create Channel -->
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="auto_create_channel"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="auto_create_channel"/>
                            <div class="text-muted">
                                Automatically create Discuss channel when creating telemedicine session
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </field>
    </record>

    <!-- Action for Telemedicine Settings -->
    <record id="action_telemed_settings" model="ir.actions.act_window">
        <field name="name">Telemedicine Configuration</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">clinic.telemed.settings</field>
        <field name="view_mode">form</field>
        <field name="context">{'module': 'clinic_integrations_telemed'}</field>
    </record>

    <!-- Menu item in Settings -->
    <menuitem id="menu_telemed_settings"
              name="Telemedicine Configuration"
              parent="base.menu_administration"
              action="action_telemed_settings"
              sequence="102"
              groups="base.group_system"/>
</odoo>
